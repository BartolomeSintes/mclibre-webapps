<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>Soluciones (2). Bitnami. Aplicaciones web. Bartolomé Sintes Marco. www.mclibre.org</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../varios/webapps.css" title="mclibre">
  <link rel="icon" href="../varios/favicon.ico">
</head>

<body>
  <h1>Bitnami - Ejercicios (2) - Soluciones - Máquina virtual de infraestructura y módulos sobre Debian</h1>

  <nav>
    <p>
      <a href="../index.html"><img src="../varios/iconos/icono-webapps.svg" alt="Índice de WebApps" title="Índice de WebApps" width="48" height="31"></a>
      <a href="#"><img src="../varios/iconos/icono-arrow-circle-up.svg" alt="Principio de la página" title="Principio de la página" width="36" height="36"></a>
    </p>

    <div class="toc">
      <h2>
        <a href="bitnami-1.html"><img src="../varios/iconos/icono-flecha-izquierda.svg" alt="Anterior" title="Anterior" width="15" height="18"></a>
        <a href="bitnami-3.html"><img src="../varios/iconos/icono-flecha-derecha.svg" alt="Siguiente" title="Siguiente" width="15" height="18"></a>
        Bitnami (2)
      </h2>

      <h3><a href="bitnami-2.html">Enunciados</a></h3>
      <ul>
        <li><a href="bitnami-2.html#ejercicio-1">1 - VM de infraestructura</a></li>
        <li><a href="bitnami-2.html#ejercicio-2">2 - phpMyAdmin</a></li>
        <li><a href="bitnami-2.html#ejercicio-3">3 - OpenCart</a></li>
      </ul>

      <h3><a href="#">Soluciones</a></h3>
      <ul>
        <li><a href="#ejercicio-1">1 - VM de infraestructura</a></li>
        <li><a href="#ejercicio-2">2 - phpMyAdmin</a></li>
        <li><a href="#ejercicio-3">3 - OpenCart</a></li>
      </ul>
    </div>
  </nav>

  <p>En esta lección se proponen soluciones detalladas de los <a href="bitnami-2.html">ejercicios de Bitnami (2)</a>. Se recomienda intentar realizarlos primero sin recurrir a estas soluciones.</p>

  <section id="ejercicio-1">
    <h2>Bitnami (2) 1 - VM de infraestructura</h2>

    <ul>
      <li><strong>Descargue la máquina virtual</strong>
        <p>La página de la máquina virtual de infraestructura LAMP de Bitnami es <a href="https://bitnami.com/stack/lamp/virtual-machine">https://bitnami.com/stack/lamp/virtual-machine</a>:</p>
        <p class="captura">
          <a href="../img/bitnami/2-1-s-1-vm-lamp.png">
            <img src="../img/bitnami/2-1-s-1-vm-lamp-mini.png" alt="Página de LAMP en Bitnami" width="495" height="315">
          </a>
        </p>
        <p>Para importar en VirtualBox la máquina virtual, haga doble clic en el fichero .OVA. Puede modificar el nombre de la máquina, la cantidad de memoria RAM o la ubicación de la imagen de disco virtual antes de hacer clic en el botón Importar.</p>
        <p class="captura">
          <img src="../img/bitnami/2-1-s-11-vm-lamp.png" alt="Importar máquina virtual en VirtualBox" width="642" height="524">
        </p>
        <p>La importación tardará unos minutos:</p>
        <p class="captura">
          <img src="../img/bitnami/2-1-s-12-vm-lamp.png" alt="Importar máquina virtual en VirtualBox" width="600" height="139">
        </p>
        <p>Al terminar la importación, la nueva máquina virtual se mostrará en VirtualBox.</p>
        <p class="captura">
          <img src="../img/bitnami/2-1-s-13-vm-lamp.png" alt="Importar máquina virtual en VirtualBox" width="642" height="230">
        </p>
      </li>
      <li><strong>Acceda al servidor</strong>
        <p>La dirección IP de la máquina virtual se muestra en la pantalla inicial de la máquina virtual:</p>
        <p class="captura">
          <img src="../img/bitnami/2-1-s-21-vm-lamp.png" alt="Máquina virtual en marcha" width="736" height="480">
        </p>
        <p>Para acceder al servidor escriba la IP que se muestra en la pantalla. En la captura de ejemplo sería <strong>http:/192.168.1.14/</strong></p>
        <p>La pantalla inicial muestra también la contraseña asignada al usuario de las aplicaciones (base de datos, etc.), aunque a veces la contraseña asignada es simplemente <strong>bitnami</strong>.</p>
        <p class="captura">
          <img src="../img/bitnami/2-1-s-22-vm-lamp.png" alt="Máquina virtual en marcha" width="736" height="480">
        </p>
      </li>
    </ul>
  </section>

  <section id="ejercicio-2">
    <h2>Bitnami (2) 2 - phpMyAdmin</h2>

    <ul>
      <li><strong>Entre en la máquina virtual</strong>
        <p>El nombre del usuario administrador y su contraseña se muestran en la pantalla inicial de la máquina virtual:</p>

        <p class="captura">
          <img src="../img/bitnami/2-2-s-1-lampp.png" alt="Máquina virtual en marcha" width="736" height="480">
        </p>
      </li>
      <li><strong>Actualice el sistema</strong>
        <p>Actualice el sistema operativo:</p>

        <div class="codigo">
          <pre><code class="language-shell">sudo apt update
sudo apt full-upgrade</code>
</pre>
        </div>
      </li>
      <li><strong>Reconfigurar teclado</strong>
        <p>La máquina virtual de infraestructura viene configurada de forma predeterminada con un teclado inglés. Para cambiar la configuración del teclado al teclado español, instale console-setup, como se comenta en la lección <a href="bitnami-varios.html#configuracion-teclado">Bitnami - Varios</a>:</p>

        <div class="codigo">
          <pre><code class="language-shell">sudo apt install dialog
sudo apt install console-setup</code>
</pre>
        </div>
      </li>
      <li><strong>Comprobar que el servicio SSH está habilitado</strong>
        <p>Para comprobar si el servicio SSH está habilitado:</p>

        <div class="codigo">
          <pre><code class="language-shell">ps aux | grep sshd</code></pre>
        </div>

        <p><strong>Nota</strong>: Si la respuesta contiene sólo una línea que acaba en <i>grep sshd</i>, es que el servicio <strong>no</strong> está habilitado.</p>

        <p>Para habilitarlo en caso de que esté deshabilitado:</p>

        <ul>
          <li>En Debian:
            <div class="codigo">
              <pre>
<code class="language-shell">sudo rm -f /etc/ssh/sshd_not_to_be_run
sudo systemctl enable ssh
sudo systemctl start ssh</code>
</pre>
            </div>
          </li>
          <li>En Ubuntu:
            <div class="codigo">
              <pre>
<code class="language-shell">sudo mv /etc/init/ssh.conf.back /etc/init/ssh.conf
sudo start ssh</code>
</pre>
            </div>
          </li>
        </ul>
      </li>
      <li><strong>Instalar PuTTY</strong>
        <p>La página web de PuTTY es <a href="https://www.chiark.greenend.org.uk/~sgtatham/putty/">https://www.chiark.greenend.org.uk/~sgtatham/putty/</a>.</p>

        <p>En <a href="http://www.cdlibre.org/">cdlibre.org</a> hay una sección dedicada a <a href="http://www.cdlibre.org/consultar/catalogo/Internet_Otros.html">Otras herramientas de Internet</a>, con información detallada sobre la última versión publicada para Windows.</p>
      </li>
      <li><strong>Conectar el ordenador anfitrión con la máquina virtual con PuTTY con túnel SSH </strong>
        <ul>
          <li>En Session ponga nombre a la sesión y guárdela:
            <p class="captura">
              <img src="../img/bitnami/2-2-s-11-putty.png" alt="Configurar PuTTY" width="452" height="442">
            </p>
          </li>
          <li>En Connection &gt; Data escriba el nombre del usuario:
            <p class="captura">
              <img src="../img/bitnami/2-2-s-12-putty.png" alt="Configurar PuTTY" width="452" height="442">
            </p>
          </li>
          <li>En Connection &gt; SSH &gt; Tunnels añada un nuevo puerto (origen: 8888; destino: localhost:80)
            <p class="captura">
              <img src="../img/bitnami/2-2-s-13-putty.png" alt="Configurar PuTTY" width="452" height="442">
            </p>
          </li>
          <li>Compruebe que se ha añadido el nuevo puerto
            <p class="captura">
              <img src="../img/bitnami/2-2-s-14-putty.png" alt="Configurar PuTTY" width="452" height="442">
            </p>
          </li>
          <li>En Session guarde de nuevo la configuración y abra la sesión:
            <p class="captura">
              <img src="../img/bitnami/2-2-s-15-putty.png" alt="Configurar PuTTY" width="452" height="442">
            </p>
          </li>
          <li>Al abrir la conexión, acepte la clave del servidor:
            <p class="captura">
              <img src="../img/bitnami/2-2-s-16-putty.png" alt="Configurar PuTTY" width="377" height="276">
            </p>
          </li>
          <li>Si la primera vez, la máquina rechaza la conexión y se muestra un mensaje de error, vuelva a abrir PuTTY, cargue la conexión guardada y ábrala de nuevo:
            <p class="captura">
              <img src="../img/bitnami/2-2-s-17-putty.png" alt="Configurar PuTTY" width="274" height="152">
            </p>
          </li>
          <li>Si la sesión se abre correctamente, le solicitará la contraseña del usuario:
            <p class="captura">
              <img src="../img/bitnami/2-2-s-18-putty.png" alt="Configurar PuTTY" width="661" height="130">
            </p>
          </li>
          <li>Compruebe que puede conectarse como usuario <strong>bitnami</strong>:
            <p class="captura">
              <img src="../img/bitnami/2-2-s-19-putty.png" alt="Configurar PuTTY" width="661" height="418">
            </p>
          </li>
        </ul>
      </li>
      <li><strong>Abrir phpMyAdmin</strong>
        <p>Abra phpMyAdmin en la máquina virtual a través de la sesión SSH escribiendo en el navegador del ordenador anfitrión la dirección <strong>http://127.0.01:8888/phpmyadmin/</strong>. El usuario administrador predeterminado de la base de datos es <strong>root</strong>, con la contraseña que se muestra en la pantalla inicial de la máquina virtual (aunque a veces, no sé por qué, la contraseña es simplemente <strong>bitnami</strong>).</p>
      </li>
    </ul>
  </section>

  <section id="ejercicio-3">
    <h2>Bitnami (2) 3 - OpenCart</h2>

    <ul>
      <li><strong>Descargar y ejecutar el instalador de módulo</strong>
        <p>La página de instaladores de OpenCart de Bitnami es bitnami <a href="https://bitnami.com/stack/opencart/installer">https://bitnami.com/stack/opencart/installers</a></p>
        <p class="captura">
          <a href="../img/bitnami/2-3-s-1-opencart.png">
            <img src="../img/bitnami/2-3-s-1-opencart-mini.png" alt="Módulo OpenCart para Debian en Bitnami" width="500" height="302">
          </a>
        </p>

        <p>Desplácese hasta el final de la página y haga clic en el enlace a la página de módulos de aplicación para Linux:</p>
        <p class="captura">
          <a href="../img/bitnami/2-3-s-2-opencart.png">
            <img src="../img/bitnami/2-3-s-2-opencart-mini.png" alt="Módulo OpenCart para Debian en Bitnami" width="500" height="227">
          </a>
        </p>

        <p>Poniendo el ratón encima del icono de descarga, puede ver la URL del archivo:</p>
        <p class="captura">
          <img src="../img/bitnami/2-3-s-3-opencart.png" alt="Módulo OpenCart para Debian en Bitnami" width="991" height="302">
        </p>

        <p>A continuación utilice el comando wget para descargar el instalador (muévase antes al directorio en que quiera realizar la descarga, por ejemplo <strong>/tmp</strong>):</p>

        <div class="codigo">
          <pre>
<code class="language-shell">cd /tmp
wget https://bitnami.com/redirect/to/408311/bitnami-opencart-3.0.3.1-0-module-linux-x64-installer.run</code>
</pre>
        </div>

        <p>Cambie los permisos del archivo y ejecute el instalador:</p>

        <div class="codigo">
          <pre>
<code class="language-shell">chmod +x ./bitnami-opencart-3.0.3.1-0-module-linux-x64-installer.run
sudo .bitnami-opencart-3.0.3.1-0-module-linux-x64-installer.run</code>
</pre>
        </div>
      </li>
      <li><strong>Instalar la aplicación</strong>
        <ul>
          <li>Installation folder: <strong>/opt/bitnami</strong>.</li>
          <li>Admin account: <strong>admin</strong> (por ejemplo)</li>
          <li>La contraseña predeterminada de usuario <strong>root</strong> MySQL es la indicada en la pantalla inicial de la máquina virtual (o <strong>bitnami</strong>)</li>
          <li>Hostname: la IP de la máquina virtual</li>
          <li>Mail support: <strong>n</strong></li>
          <li>Launch Module: <strong>Y</strong></li>
        </ul>
        <p>La contraseña predeterminada del usuario administrador de la aplicación será <strong>bitnami</strong></p>
      </li>
      <li><strong>Apagar la máquina virtual</strong>
        <p>Puede apagar la máquina virtual con el comando poweroff o cerrando la ventana de VirtualBox:</p>
        <div class="codigo">
          <pre><code class="language-shell">sudo poweroff</code></pre>
        </div>
      </li>
    </ul>
  </section>

  <footer>
    <p class="ultmod">Última modificación de esta página: 2 de febrero de 2019</p>

    <p class="licencia">
      <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/deed.es_ES"><img src="../varios/iconos/icono-cc-by-sa.svg" alt="Licencia Creative Commons" title="Licencia Creative Commons BY-SA" width="120" height="42"></a><br>
      Esta página forma parte del curso <strong><a href="http://www.mclibre.org/consultar/webapps/">Aplicaciones web</a></strong> por <a href="http://www.mclibre.org/" rel="author">Bartolomé Sintes Marco</a><br>
      que se distribuye bajo una <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/deed.es_ES">Licencia Creative Commons Reconocimiento-CompartirIgual 4.0 Internacional (CC BY-SA 4.0)</a>.
    </p>
  </footer>
</body>
</html>
