<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Docker. Aplicaciones web. Bartolomé Sintes Marco. www.mclibre.org</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" type="text/css" href="../varios/webapps.css" title="mclibre" />
  <link rel="icon" href="../varios/favicon.ico" />
</head>

<body>
  <h1>Docker</h1>

  <nav>
    <p>
      <a href="../index.html"><img src="../varios/iconos/icono-webapps.svg" alt="Índice de WebApps" title="Índice de WebApps" width="48" height="31" /></a>
      <a href="#"><img src="../varios/iconos/icono-arrow-circle-up.svg" alt="Principio de la página" title="Principio de la página" width="36" height="36" /></a>
    </p>

    <div class="toc">
      <h2>
        <img src="../varios/iconos/icono-vacio.svg" alt="" width="15" height="15" /> Docker
        <a href="docker-1.html"><img src="../varios/iconos/icono-flecha-derecha.svg" alt="Siguiente" title="Siguiente" width="15" height="18" /></a>
      </h2>

      <ul>
        <li><a href="#organizacion-ejercicios">Organización ejercicios</a></li>
        <li><a href="#docker">Docker</a></li>
        <li><a href="#aprender-mas">Aprender más</a></li>
        <li><a href="#bitnami">Contenedores de Bitnami</a></li>
        <li><a href="#docker-comandos">Comandos Docker</a>
          <ul>
            <li><a href="#imagenes">Imágenes</a></li>
            <li><a href="#contenedores">Contenedores</a></li>
            <li><a href="#redes">Redes</a></li>
            <li><a href="#sistema">Sistema</a></li>
          </ul>
        </li>
      </ul>
    </div>
  </nav>

  <section id="organizacion-ejercicios">
    <h2>Organización de los ejercicios</h2>

    <p>Sólo hay una página de ejercicios de Docker:</p>
    <ul>
      <li><a href="docker-1.html">Docker (1)</a>: Máquina virtual Ubuntu y Docker</li>
    </ul>
  </section>

  <section id="docker">
    <h2>Contenedores: Docker</h2>

    <p><img src="../img/iconos/logos/logo-docker.svg" alt="Logotipo Docker" title="Logotipo Docker" width="255" height="145" class="derecha" /></p>

    <p><a href="https://www.docker.com/">Docker</a> es un sistema de virtualización de aplicaciones mediante contenedores, creado por Solomon Hykes y otros ingenieros. En 2013 se convirtió en un proyecto de software libre (licencia Apache) en el que participan cada vez más empresas. La versión 1.0 se publicó en junio de 2014 y ha tenido un desarrollo muy rápido.</p>

    <p>En marzo de 2017, Docker pasó a publicar una nueva versión cada mes y cambió su numeración al formato AA.MM (año y mes). Estas versiones se mantienen solamente durante un mes, aunque hay una versión trimestral que se mantiene durante cuatro meses (la primera fue Docker 17.03).</p>

    <p>Docker ofrece una versión Enterprise (de pago) y una versión Community (gratuita). La diferencia radica en el nivel de soporte y certificación que proporciona Docker a la versión Enterprise.</p>

    <p class="mcl-svg-diagrama-temporal">
      <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="950" viewBox="-100 -60 950 100">
        <line x1="-20" y1="0" x2="860" y2="0" stroke-width="3" stroke="hsl(195, 80%, 40%)" />
        <text x="-90" y="4" text-anchor="start" style="font-size: 100%">Docker</text>
        <text x="-65" y="-50" text-anchor="middle" style="font-size: 60%">Actualizado</text>
        <text x="-65" y="-38" text-anchor="middle" style="font-size: 60%">15-04-2018</text>

        <line x1="0" y1="-50" x2="0" y2="30" stroke-width="1" stroke-dasharray="5,5" stroke="black" />
        <text x="60" y="-40" text-anchor="middle" style="font-size: 80%">2013</text>
        <line x1="120" y1="-50" x2="120" y2="30" stroke-width="1" stroke-dasharray="5,5" stroke="black" />
        <text x="180" y="-40" text-anchor="middle" style="font-size: 80%">2014</text>
        <line x1="240" y1="-50" x2="240" y2="30" stroke-width="1" stroke-dasharray="5,5" stroke="black" />
        <text x="300" y="-40" text-anchor="middle" style="font-size: 80%">2015</text>
        <line x1="360" y1="-50" x2="360" y2="30" stroke-width="1" stroke-dasharray="5,5" stroke="black" />
        <text x="420" y="-40" text-anchor="middle" style="font-size: 80%">2016</text>
        <line x1="480" y1="-50" x2="480" y2="30" stroke-width="1" stroke-dasharray="5,5" stroke="black" />
        <text x="540" y="-40" text-anchor="middle" style="font-size: 80%">2017</text>
        <line x1="600" y1="-50" x2="600" y2="30" stroke-width="1" stroke-dasharray="5,5" stroke="black" />
        <text x="660" y="-40" text-anchor="middle" style="font-size: 80%">2018</text>
        <line x1="720" y1="-50" x2="720" y2="30" stroke-width="1" stroke-dasharray="5,5" stroke="black" />
        <text x="780" y="-40" text-anchor="middle" style="font-size: 80%">2019</text>
        <line x1="840" y1="-50" x2="840" y2="30" stroke-width="1" stroke-dasharray="5,5" stroke="black" />

        <circle cx="27" cy="0" r="5" fill="hsl(195, 80%, 40%)" />
        <text x="27" y="-15" text-anchor="middle" fill="hsl(195, 80%, 40%)" style="font-size: 80%; font-weight: bold">0.1</text>
        <circle cx="65" cy="0" r="5" fill="hsl(195, 80%, 40%)" />
        <text x="65" y="25" text-anchor="middle" fill="hsl(195, 80%, 40%)" style="font-size: 80%; font-weight: bold">0.5</text>
        <circle cx="152" cy="0" r="5" fill="hsl(195, 80%, 40%)" />
        <text x="152" y="-15" text-anchor="middle" fill="hsl(195, 80%, 40%)" style="font-size: 80%; font-weight: bold">0.10</text>
        <circle cx="172" cy="0" r="5" fill="hsl(195, 80%, 40%)" />
        <text x="172" y="25" text-anchor="middle" fill="hsl(195, 80%, 40%)" style="font-size: 80%; font-weight: bold">1.0</text>
        <circle cx="180" cy="0" r="5" fill="hsl(195, 80%, 40%)" />
        <text x="180" y="-15" text-anchor="middle" fill="hsl(195, 80%, 40%)" style="font-size: 80%; font-weight: bold">1.1</text>
        <circle cx="196" cy="0" r="5" fill="hsl(195, 80%, 40%)" />
        <text x="196" y="25" text-anchor="middle" fill="hsl(195, 80%, 40%)" style="font-size: 80%; font-weight: bold">1.2</text>
        <circle cx="215" cy="0" r="5" fill="hsl(195, 80%, 40%)" />
        <text x="215" y="-15" text-anchor="middle" fill="hsl(195, 80%, 40%)" style="font-size: 80%; font-weight: bold">1.3</text>
        <circle cx="233" cy="0" r="5" fill="hsl(195, 80%, 40%)" />
        <text x="233" y="25" text-anchor="middle" fill="hsl(195, 80%, 40%)" style="font-size: 80%; font-weight: bold">1.4</text>
        <circle cx="253" cy="0" r="5" fill="hsl(195, 80%, 40%)" />
        <text x="253" y="-15" text-anchor="middle" fill="hsl(195, 80%, 40%)" style="font-size: 80%; font-weight: bold">1.5</text>
        <circle cx="275" cy="0" r="5" fill="hsl(195, 80%, 40%)" />
        <text x="275" y="25" text-anchor="middle" fill="hsl(195, 80%, 40%)" style="font-size: 80%; font-weight: bold">1.6</text>
        <circle cx="295" cy="0" r="5" fill="hsl(195, 80%, 40%)" />
        <text x="295" y="-15" text-anchor="middle" fill="hsl(195, 80%, 40%)" style="font-size: 80%; font-weight: bold">1.7</text>
        <circle cx="313" cy="0" r="5" fill="hsl(195, 80%, 40%)" />
        <text x="313" y="25" text-anchor="middle" fill="hsl(195, 80%, 40%)" style="font-size: 80%; font-weight: bold">1.8</text>
        <circle cx="341" cy="0" r="5" fill="hsl(195, 80%, 40%)" />
        <text x="341" y="-15" text-anchor="middle" fill="hsl(195, 80%, 40%)" style="font-size: 80%; font-weight: bold">1.9</text>
        <circle cx="371" cy="0" r="5" fill="hsl(195, 80%, 40%)" />
        <text x="371" y="25" text-anchor="middle" fill="hsl(195, 80%, 40%)" style="font-size: 80%; font-weight: bold">1.10</text>
        <circle cx="394" cy="0" r="5" fill="hsl(195, 80%, 40%)" />
        <text x="394" y="-15" text-anchor="middle" fill="hsl(195, 80%, 40%)" style="font-size: 80%; font-weight: bold">1.11</text>
        <circle cx="429" cy="0" r="5" fill="hsl(195, 80%, 40%)" />
        <text x="429" y="25" text-anchor="middle" fill="hsl(195, 80%, 40%)" style="font-size: 80%; font-weight: bold">1.12</text>
        <circle cx="486" cy="0" r="5" fill="hsl(195, 80%, 40%)" />
        <text x="486" y="-15" text-anchor="middle" fill="hsl(195, 80%, 40%)" style="font-size: 80%; font-weight: bold">1.13</text>
        <circle cx="498" cy="0" r="5" fill="hsl(195, 80%, 40%)" />
        <text x="498" y="25" text-anchor="middle" fill="hsl(195, 80%, 40%)" style="font-size: 80%; font-weight: bold">17.03</text>
        <circle cx="539" cy="0" r="5" fill="hsl(195, 80%, 40%)" />
        <text x="539" y="-15" text-anchor="middle" fill="hsl(195, 80%, 40%)" style="font-size: 80%; font-weight: bold">17.06</text>
        <circle cx="568" cy="0" r="5" fill="hsl(195, 80%, 40%)" />
        <text x="568" y="25" text-anchor="middle" fill="hsl(195, 80%, 40%)" style="font-size: 80%; font-weight: bold">17.09</text>
        <circle cx="599" cy="0" r="5" fill="hsl(195, 80%, 40%)" />
        <text x="599" y="-15" text-anchor="middle" fill="hsl(195, 80%, 40%)" style="font-size: 80%; font-weight: bold">17.12</text>
        <circle cx="627" cy="0" r="5" fill="hsl(195, 80%, 40%)" />
        <text x="627" y="25" text-anchor="middle" fill="hsl(195, 80%, 40%)" style="font-size: 80%; font-weight: bold">18.03</text>
      </svg>
    </p>

    <p>Los contenedores se distinguen de las máquinas virtuales en que las máquinas virtuales emulan un ordenador físico en el que se instala un sistema operativo completo, mientras que los contenedores usan el kernel del sistema operativo anfitrión pero contienen las capas superiores (sistema de ficheros, utilidades, aplicaciones).</p>

    <p>Al ahorrarse la emulación del ordenador y el sistema operativo de la máquina virtual, los contenedores son más pequeños y rápidos que las máquinas virtuales. Pero al incluir el resto de capas de software, se consigue el aislamiento e independencia entre contenedores que se busca con las máquinas virtuales.</p>

    <p>Los contenedores son útiles en los servidores, pero también para pruebas de software, ya que incluyen todos los elementos que necesitan las aplicaciones, lo que facilita la instalación y elimina los problemas de incompatibilidad de versiones en bibliotecas y aplicaciones auxiliares. También podría utilizarse para la distribución de software en general, pero en ese caso juega en contra la duplicidad que supone el que cada contenedor incluye todas las capas de software.</p>

    <hr class="corta" />

    <p>Docker empezó estando disponible solamente para distribuciones GNU/Linux, pero desde junio de 2016 también está disponible como aplicación nativa en Windows Server 2016 y Windows 10.</p>

    <p>Docker utiliza la virtualización ofrecida por el sistema operativo. En el caso de Windows 10, eso significa que para usar Docker de forma nativa hay que activar Hyper-V que, por desgracia, es incompatible con VirtualBox. Para poder utilizar Docker en Windows 7 o en Windows 10 sin Hyper-V, Docker ofrece desde agosto de 2015 <a href="https://github.com/docker/toolbox">Docker Toolbox</a>, que relamente es una máquina virtual (que se ejecuta en VirtualBox) que contiene Docker.</p>

    <p>El componente básico de Docker es el <a href="https://docs.docker.com/engine/userguide/intro/">Docker Engine</a>, pero Docker ofrece también una serie de herramientas para administrar, distribuir e instalar contenedores: <a href="https://docs.docker.com/compose/overview/">Docker Compose</a>, <a href="https://docs.docker.com/machine/overview/">Docker Machine</a>, etc.</p>

    <hr class="corta" />

    <p>Aunque un contenedor puede incluir cualquier número de aplicaciones, lo habitual es que un contenedor contenga una sola aplicación (y los programas necesarios para ponerse en marcha). Por ejemplo, si una aplicación web guarda la información en una base de datos, en vez de incluir la aplicación y la base de datos en el mismo contenedor, se suelen crear dos contenedores: uno con la aplicación web y otro con la base de datos. Por supuesto, en el contenedor de la aplicación web sí que se incluiría un servidor web.</p>

    <p>Para que varios contenedores puedan comunicarse entre sí, Docker permite la creación de redes virtuales privadas en la que se incluyen los contenedores.</p>

    <p>Cuando varios contenedores contienen aplicaciones web, los servidores web de cada contenedor en principio entrarían en conflicto puesto que todos atienden al puerto 80. Ese problema se presenta siempre que contenedores distintos incluyen aplicaciones que atienden a través de los mismos puertos (base de datos, etc.). Para resolver este problema, Docker permite que los contenedores escuchen por un puerto cualquiera, aunque internamente el servidor sigue utilizando su puerto habitual. En estos casos se debe utilizar un proxy inverso que redirija las peticiones exteriores al puerto correspondiente.</p>

    <hr class="corta" />

    <p>El proceso de creación de un contenedor incluye varias fases.</p>
    <ul>
      <li>El primer paso es escribir un <a href="https://docs.docker.com/engine/reference/builder/">Dockerfile</a>, un fichero de texto que enumera los elementos que acabará teniendo el contenedor. El Dockerfile lo puede escribir el propio usuario o pueden utilizarse Dockerfiles públicos disponibles en Internet.</li>
      <li>A partir del Dockerfile, se crea una imagen que recopila todos los elementos incluidos en un único paquete. La imagen la puede crear el propio usuario o pueden descargarse imágenes públicas disponibles en Internet.</li>
      <li>Las imágenes se incluyen en <a href="https://docs.docker.com/registry/">registros</a>, que funcionan como repositorio de las imágenes. Los registros pueden ser públicos o privados.</li>
      <li>Los clientes de Docker descargan las imágenes de los registros.</li>
      <li>Los clientes de Docker crean los contenedores en el ordenador del usuario a partir de las imágenes descargadas.</li>
    </ul>

    <p>No es necesario realizar todas estas fases para crear un contenedor, pues en Internet podemos encontrar imágenes ya preparadas por los creadores de las aplicaciones o por terceros (como <a href="https://bitnami.com/stacks">Bitnami</a>).</p>
  </section>

  <section id="aprender-mas">
    <h2>Aprender más</h2>

    <ul>
      <li><a href="https://docs.docker.com/engine/userguide/intro/">Documentación oficial de Docker</a></li>
      <li><a href="https://docs.docker.com/toolbox/overview/">Documentación de Docker Toolbox</a></li>
      <li><a href="https://github.com/docker/labs">Docker Labs</a>: Tutoriales de Docker</li>
      <li>Release Notes:
        <a href="https://docs.docker.com/release-notes/docker-ce/#18010-ce-2018-01-10">18.01</a> -
        <a href="https://docs.docker.com/release-notes/docker-ce/#17120-ce-2017-12-27">17.12</a> -
        <a href="https://docs.docker.com/release-notes/docker-ce/#17110-ce-2017-11-20">17.11</a> -
        <a href="https://docs.docker.com/release-notes/docker-ce/#17100-ce-2017-10-17">17.10</a> -
        <a href="https://docs.docker.com/release-notes/docker-ce/#17090-ce-2017-09-26">17.09</a> -
        <a href="https://docs.docker.com/release-notes/docker-ce/#17070-ce-2017-08-29">17.07</a> -
        <a href="https://docs.docker.com/release-notes/docker-ce/#17060-ce-2017-06-28">17.06</a> -
        <a href="https://docs.docker.com/release-notes/docker-ce/#17050-ce-2017-05-04">17.05</a> -
        <a href="https://docs.docker.com/release-notes/docker-ce/#17040-ce-2017-04-05">17.04</a> -
        <a href="https://docs.docker.com/release-notes/docker-ce/#17030-ce-2017-03-01">17.03</a>
      </li>
      <li>Novedades:
        <a href="https://blog.docker.com/2017/06/announcing-docker-17-06-community-edition-ce/">Docker 17.06 CE</a> -
        <a href="https://blog.docker.com/2017/01/whats-new-in-docker-1-13/">Docker 1.13</a> -
        <a href="https://blog.docker.com/2016/07/docker-built-in-orchestration-ready-for-production-docker-1-12-goes-ga/">Docker 1.12</a>
      </li>
      <li><a href="https://ericchiang.github.io/post/containers-from-scratch/">Containers from scratch</a></li>
      <li><a href="https://opensource.com/article/17/1/container-strategy-for-executives">An executive's guide to containers (25/01/17)</a></li>
    </ul>
  </section>

  <section id="bitnami">
    <h2>Contenedores Docker de Bitnami</h2>

    <p>Los <a href="https://bitnami.com/containers">contenedores Docker de aplicaciones de Bitnami</a> incluyen únicamente la aplicación, aunque también están disponibles contenedores de aplicaciones de infraestructura (lenguajes de programación, bases de datos, servidores web, etc.).</p>

    <p>Actualmente (enero de 2018) el número de contenedores que ofrece Bitnami es bastante menor que el que ofrece en forma de instaladores (unas 50 contenedores frente a unos 150 instaladores).</p>

    <p>Los contenedores de Bitnami están creados con una herramienta llamada <a href="https://stacksmith.bitnami.com/">Stacksmith</a> que Bitnami ofrece para crear contenedores personalizados.</p>
  </section>

  <section id="docker-comandos">
    <h2>Algunos comandos de Docker</h2>

    <ul>
      <li><a href="https://github.com/wsargent/docker-cheat-sheet">Docker Cheat Sheet</a></li>
      <li>Una vez instalado Docker, todo se gestiona mediante comandos, que en Ubuntu se deben ejecutar como administrador:
        <div class="codigo">
          <pre><code class="language-shell">sudo docker COMANDOS</code></pre>
        </div>
      </li>
      <li>Para ver los comandos disponibles (en general y en particular):
        <div class="codigo">
          <pre><code class="language-shell">sudo docker</code></pre>
        </div>

        <div class="codigo">
          <pre>
<code class="language-shell">sudo docker image
sudo docker network
...</code>
</pre>
        </div>
      </li>
      <li>Para ver las opciones de cada comando:
        <div class="codigo">
          <pre><code class="language-shell">sudo docker cp --help</code></pre>
        </div>
      </li>
      <li>Los comandos tienen a su vez opciones. Los nombres de las opciones van precedidas de los caracteres -- y entre la opción y su valor se puede escribir un espacio o el carácter =.
        <div class="codigo">
          <pre><code class="language-shell">sudo docker COMANDO --OPCION=VALOR</code></pre>
        </div>
        <div class="codigo">
          <pre><code class="language-shell">sudo docker COMANDO --OPCION VALOR</code></pre>
        </div>
      </li>
      <li>Si el valor de una opción contiene espacios, escriba el valor entre comillas
        <div class="codigo">
          <pre><code class="language-shell">sudo docker COMANDO --OPCION="VALOR CON ESPACIOS"</code></pre>
        </div>
      </li>
    </ul>

    <section id="imagenes">
      <h3>Imágenes</h3>

      <p>En los comandos siguientes REPOSITORIO es el nombre del repositorio en el que se encuentra la imagen (por ejemplo bitnami/phpmyadmin) e IMAGEN es el nombre de la imagen descargada. Realmente, las imágenes descargadas se llaman igual que los repositorios de donde se han descargado, pero he distinguido los nombres para dejar claro cuándo nos estamos haciendo referencia a la imagen del repositiorio y cuándo a la imagen local.</p>

      <ul>
        <li>Para gestionar las imágenes, se utiliza el comando:
          <div class="codigo">
            <pre><code class="language-shell">sudo docker image OPCIONES</code></pre>
          </div>
        </li>
        <li>Para descargar una imagen:
          <div class="codigo">
            <pre><code class="language-shell">sudo docker image pull REPOSITORIO</code></pre>
          </div>
          <div class="codigo">
            <pre><code class="language-shell">sudo docker pull REPOSITORIO</code></pre>
          </div>
        </li>
        <li>Para ver las imágenes ya descargadas:
          <div class="codigo">
            <pre><code class="language-shell">sudo docker image ls</code></pre>
          </div>
        </li>
        <li>Para borrar una imagen (se deben borrar previamente los contenedores basados en esa imagen):
          <div class="codigo">
            <pre><code class="language-shell">sudo docker image rm IMAGEN</code></pre>
          </div>
        </li>
      </ul>
    </section>

    <section id="contenedores">
      <h3>Contenedores</h3>

      <p>En los comandos siguientes CONTENEDOR es el nombre del contenedor, que podemos elegir al crearlo, y RED es el nombre de una red ya existente.</p>
      <ul>
        <li>Para crear un contenedor (y ponerlo en marcha):
          <div class="codigo">
            <pre><code class="language-shell">sudo docker run --name=CONTENEDOR REPOSITORIO</code></pre>
          </div>
          <p>El problema de este comando es que dejamos de tener acceso a la shell y sólo se puede parar el proceso desde otro terminal.</p>

          <p>Lo habitual es poner en marcha el contenedor en modo separado (<i>detached</i>), es decir, en segundo plano, y así podemos seguir utilizando la shell:</p>
          <div class="codigo">
            <pre><code class="language-shell">sudo docker run <strong>-d</strong> --name=CONTENEDOR REPOSITORIO</code></pre>
          </div>

          <p>Si queremos ver la secuencia de arranque del contenedor, podemos poner en marcha el contenedor en modo pseudo-tty, que trabaja en primer plano, pero del que podemos salir con <span class="soft-atajo-teclado">Ctrl+C</span>.</p>
          <div class="codigo">
            <pre><code class="language-shell">sudo docker run <strong>-t</strong> --name=CONTENEDOR REPOSITORIO</code></pre>
          </div>

          <p>Al crear el contenedor se pueden añadir diversas opciones:</p>
          <ul>
            <li>Para incluir el contenedor en una red privada virtual (y que se pueda comunicar con el resto de contenedores incluidos en esa red):
              <div class="codigo">
                <pre><code class="language-shell">sudo docker run --name=CONTENEDOR <strong>--net=RED</strong> REPOSITORIO</code></pre>
              </div>
            </li>
            <li>Para que el contenedor atienda a un puerto determinado, aunque internamente atienda un puerto distinto:
              <div class="codigo">
                <pre><code class="language-shell">sudo docker run --name=CONTENEDOR <strong>-p PUERTO_EXTERNO:PUERTO_INTERNO</strong> REPOSITORIO</code></pre>
              </div>
            </li>
            <li>Para establecer variables de configuración del contenedor:
              <div class="codigo">
                <pre><code class="language-shell">sudo docker run --name=CONTENEDOR <strong>-e VARIABLE=VALOR</strong> REPOSITORIO</code></pre>
              </div>
              <p>Las variables de configuración se pueden consultar en el repositorio del que obtenemos la imagen.</p>
            </li>
          </ul>
        </li>
        <li>Para ver los contenedores en funcionamiento:
          <div class="codigo">
            <pre><code class="language-shell">sudo docker ps</code></pre>
          </div>
        </li>
        <li>Para ver los contenedores en funcionamiento o detenidos:
          <div class="codigo">
            <pre><code class="language-shell">sudo docker ps -a</code></pre>
          </div>
        </li>
        <li>Para detener un contenedor:
          <div class="codigo">
            <pre><code class="language-shell">sudo docker stop CONTENEDOR</code></pre>
          </div>
        </li>
        <li>Para borrar un contenedor:
          <div class="codigo">
            <pre><code class="language-shell">sudo docker rm CONTENEDOR</code></pre>
          </div>
        </li>
        <li>Para poner en marcha un contenedor detenido:
          <div class="codigo">
            <pre><code class="language-shell">sudo docker start CONTENEDOR</code></pre>
          </div>
        </li>
        <li>Para entrar en la shell de un contenedor:
          <div class="codigo">
            <pre><code class="language-shell">sudo docker exec -it CONTENEDOR /bin/bash</code></pre>
          </div>
        </li>
        <li>Para entrar en la shell del contenedor como root:
          <div class="codigo">
            <pre><code class="language-shell">sudo docker exec -u 0 -it CONTENEDOR /bin/bash</code></pre>
          </div>
        </li>
        <li>Para salir de la shell del contenedor:
          <div class="codigo">
            <pre><code class="language-shell">exit</code></pre>
          </div>
        </li>
        <li>Para copiar (o mover) archivos entre el contenedor y el sistema anfitrión o viceversa:
          <div class="codigo">
            <pre>
<code class="language-shell">sudo docker cp CONTENEDOR:ORIGEN DESTINO</code>
</pre>
          </div>
          <div class="codigo">
            <pre>
<code class="language-shell">sudo docker cp ORIGEN CONTENEDOR:DESTINO</code>
</pre>
          </div>
        </li>
      </ul>
    </section>

    <section id="redes">
      <h3>Redes</h3>

      <p>En los comandos siguientes RED es el nombre de la red privada.</p>

      <ul>
        <li>Para gestionar las redes, se utiliza el comando:
          <div class="codigo">
            <pre><code class="language-shell">sudo docker network OPCIONES</code></pre>
          </div>
        </li>
        <li>Para crear una red:
          <div class="codigo">
            <pre><code class="language-shell">sudo docker network create RED</code></pre>
          </div>
        </li>
        <li>Para ver las redes existentes:
          <div class="codigo">
            <pre><code class="language-shell">sudo docker network ls</code></pre>
          </div>
        </li>
        <li>Para ver información detallada de una red (entre ella, los contenedores incluidos y sus IP privadas):
          <div class="codigo">
            <pre><code class="language-shell">sudo docker network inspect RED</code></pre>
          </div>
        </li>
        <li>Para borrar una red:
          <div class="codigo">
            <pre><code class="language-shell">sudo docker network rm RED</code></pre>
          </div>
        </li>
      </ul>
    </section>

    <section id="sistema">
      <h3>Sistema</h3>

      <ul>
        <li>Para ver el espacio ocupado por las imágenes, los contenedores y los volúmenes:
          <div class="codigo">
            <pre><code class="language-shell">sudo docker system df</code></pre>
          </div>
        </li>
        <li>Para eliminar los elementos que no están en marcha:
          <ul>
            <li>Contenedores:
              <div class="codigo">
                <pre><code class="language-shell">sudo docker container prune</code></pre>
              </div>
            </li>
            <li>Imágenes:
              <div class="codigo">
                <pre><code class="language-shell">sudo docker image prune</code></pre>
              </div>
            </li>
            <li>Volúmenes:
              <div class="codigo">
                <pre><code class="language-shell">sudo docker volume prune</code></pre>
              </div>
            </li>
            <li>Redes:
              <div class="codigo">
                <pre><code class="language-shell">sudo docker network prune</code></pre>
              </div>
            </li>
            <li>todo:
              <div class="codigo">
                <pre><code class="language-shell">sudo docker system prune</code></pre>
              </div>
            </li>
          </ul>
        </li>
      </ul>
    </section>
  </section>

  <footer>
    <p class="ultmod">Última modificación de esta página: 15 de abril de 2018</p>

    <p class="licencia">
      <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/deed.es_ES"><img src="../varios/iconos/icono-cc-by-sa.svg" alt="Licencia Creative Commons" title="Licencia Creative Commons BY-SA" width="120" height="42" /></a><br />
      Esta página forma parte del curso <strong><a href="http://www.mclibre.org/consultar/webapps/">Aplicaciones web</a></strong> por <a href="http://www.mclibre.org/" rel="author">Bartolomé Sintes Marco</a><br />
      que se distribuye bajo una <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/deed.es_ES">Licencia Creative Commons Reconocimiento-CompartirIgual 4.0 Internacional (CC BY-SA 4.0)</a>.
    </p>
  </footer>
</body>
</html>
