<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <title>Soluciones (2). Drupal. Aplicaciones web. Bartolomé Sintes Marco</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="../varios/webapps.css" rel="stylesheet" type="text/css" title="Color" />
    <link rel="icon" href="../varios/favicon.ico" />
  </head>

  <body>
    <h1>Drupal. Soluciones (2)</h1>

    <nav>
      <p>
        <a href="../index.html"><img src="../varios/iconos/icono_webapps.svg" alt="Índice de WebApps" title="Índice de WebApps" width="48" height="31" /></a>
        <a href="#"><img src="../varios/iconos/icono_arrow_circle_up.svg" alt="Principio de la página" title="Principio de la página" width="36" height="36" /></a>
      </p>

      <div class="toc">
        <h2>
          <a href="webapps_drupal_1.html"><img src="../varios/iconos/icono_flecha_izquierda.svg" alt="Anterior" title="Anterior" width="15" height="18" /></a>
          Drupal (2)
          <a href="webapps_drupal_3.html"><img src="../varios/iconos/icono_flecha_derecha.svg" alt="Siguiente" title="Siguiente" width="15" height="18" /></a>
        </h2>

        <h3><a href="webapps_drupal_2.html">Enunciados</a></h3>
        <ul>
          <li><a href="webapps_drupal_2.html#ejercicio-1">1 - Artículos y páginas</a></li>
          <li><a href="webapps_drupal_2.html#ejercicio-2">2 - Configuración creación</a></li>
          <li><a href="webapps_drupal_2.html#ejercicio-3">3 - Roles y usuarios</a></li>
          <li><a href="webapps_drupal_2.html#ejercicio-4">4 - Ajustar CKEditor</a></li>
          <li><a href="webapps_drupal_2.html#ejercicio-5">5 - Módulo IMCE</a></li>
          <li><a href="webapps_drupal_2.html#ejercicio-6">6 - Configurar IMCE</a></li>
          <li><a href="webapps_drupal_2.html#ejercicio-7">7 - Módulo IMCE Mkdir</a></li>
        </ul>

        <h3>Soluciones</h3>
        <ul>
          <li><a href="#ejercicio-1">1 - Artículos y páginas</a></li>
          <li><a href="#ejercicio-2">2 - Configuración creación</a></li>
          <li><a href="#ejercicio-3">3 - Roles y usuarios</a></li>
          <li><a href="#ejercicio-4">4 - Ajustar CKEditor</a></li>
          <li><a href="#ejercicio-5">5 - Módulo IMCE</a></li>
          <li><a href="#ejercicio-6">6 - Configurar IMCE</a></li>
          <li><a href="#ejercicio-7">7 - Módulo IMCE Mkdir</a></li>
        </ul>
      </div>
    </nav>

    <p class="incompleto"><img src="../varios/iconos/icono_en_construccion.svg" alt="En construcción" title="En construcción" width="55" height="48" />Estas soluciones están pendientes de actualizar para Drupal 8.</p>

    <p>En esta lección se proponen soluciones detalladas de los <a href="webapps_drupal_2.html">ejercicios (2) de Drupal</a>. Se recomienda intentar realizarlos primero sin recurrir a estas soluciones.</p>

    <section id="ejercicio-1">
      <h2>Drupal (2) 1 - Artículos y páginas básicas</h2>

      <p>La creación de artículos y páginas básicas no plantea ninguna dificultad, por lo que no se hace aquí ningún comentario adicional.</p>
    </section>

    <section id="ejercicio-2">
      <h2>Drupal (2) 2 - Modificar la configuración de creación de artículos y páginas básicas</h2>

      <ol>
        <li>Aumentar el tamaño de las imágenes que se pueden subir a los artículos.
          <p>en <strong>php.ini</strong>:</p>
          <div class="codphp">
            <p>upload_max_filesize = 10M</p>
            <p>post_max_size = 10M</p>
          </div>
          <p>en <strong>.htaccess</strong>:</p>

          <div class="codshell">
            <pre>php_value upload_max_filesize 10M
php_value post_max_size 10M</pre>
          </div>
        </li>
        <li>Permitir crear tablas en HTML Básico.
          <p>Incluir botón en CKEditor</p>
        </li>
      </ol>
    </section>

    <section id="ejercicio-3">
      <h2>Drupal (2) 3 - Roles y usuarios</h2>
      <ol>
        <li>Crear los roles editor y minieditor
          <ul>
            <li>Como usuario <strong>admin</strong> y abrir el menú <strong>Usuarios &gt; Permisos</strong>. En esa pantalla se pueden ver los permisos asignados a los roles existentes. Inicialmente, Drupal crea tres roles básicos: Usuario anónimo, Usuario autenticado y Administrador.
              <p class="captura"><img alt="Drupal. Roles" src="../img/drupal/drupal_roles_1.png" width="1008" height="475" /></p>
            </li>
            <li>Para crear un nuevo Rol, hay que hacer clic en Roles, escribir el nombre del nuevo rol y hacer clic en Añadir rol:
              <p class="captura"><img alt="Drupal. Roles" src="../img/drupal/drupal_roles_2.png" width="1008" height="595" /></p>
            </li>
            <li>Inmediatamente, se mostrará el nuevo rol en la lista de roles:
              <p class="captura"><img alt="Drupal. Roles" src="../img/drupal/drupal_roles_3.png" width="1008" height="240" /></p>
            </li>
            <li>Haciendo clic en "editar permisos" se pueden asignar los permisos al rol (algunos permisos pueden representar riesgos de seguridad, se comenta en cada opción):
              <p class="captura"><img alt="Drupal. Roles" src="../img/drupal/drupal_roles_4.png" width="1000" height="455" /></p>
              <p>En el caso del rol <strong>minieditor</strong>, le podemos poner:</p>
              <ul>
                <li>bloque Comment: todos los permisos menos Administrar comentarios</li>
                <li>bloque Filter: permitir Filtered HTML y Full HTML</li>
                <li>bloque Node: todos los permisos relacionados con la creación, edición y borrado del contenido propio</li>
                <li>bloque Search: permitir Usar búsqueda y Usar búsqueda avanzada</li>
                <li>bloque Taxonomy: ninguno</li>
              </ul>
              <p>De la misma forma, crear el rol <strong>editor</strong>:</p>
              <ul>
                <li>bloque Comment: todos los permisos </li>
                <li>bloque Filter: permitir Filtered HTML y Full HTML</li>
                <li>bloque Node: todos los permisos relacionados con la creación, edición y borrado del contenido propio y de otros (pero no marcar Sortear el control de acceso, Administrar tipos de contenido, Administrar contenido)</li>
                <li>bloque Search: permitir Usar búsqueda y Usar búsqueda avanzada</li>
                <li>bloque Taxonomy: todos</li>
              </ul>
            </li>
          </ul>
        </li>
        <li>Crear los usuarios <strong>minieditor_1</strong> y <strong>editor_1 </strong>
          <ul>
            <li>Como usuario <strong>admin</strong>, abrir el menú <strong>Personas &gt; Lista</strong> y hacer clic en Agregar usuario.
              <p class="captura"><img alt="Drupal. Usuarios" src="../img/drupal/drupal_usuarios_1.png" width="1008" height="240" /></p>
            </li>
            <li>Se abrirá un formulario con la información del nuevo usuario:
              <p class="captura"><img alt="Drupal. Usuarios" src="../img/drupal/drupal_usuarios_2.png" width="1000" height="340" /></p>
              <p>En el caso del usuario <strong>minieditor_1</strong>, le podemos poner:</p>
              <ul>
                <li>Nombre de usuario: <span class="resaltado">minieditor_1</span></li>
                <li>Dirección de correo electrónico: <span class="resaltado">minieditor_1@example.com</span></li>
                <li>Contraseña: <span class="resaltado">minieditor_1</span></li>
                <li>Roles: <span class="resaltado">minieditor</span></li>
              </ul>
            </li>
            <li>Si no hay errores, Drupal indicará que se ha creado el usuario:
              <p class="captura"><img alt="Drupal. Usuarios" src="../img/drupal/drupal_usuarios_3.png" width="1000" height="60" /></p>
            </li>
            <li>De la misma forma, crear el usuario <strong>editor_1</strong> con rol <strong>editor</strong>.</li>
          </ul>
        </li>
        <li>Modificar la información de usuario
          <p>Los usuarios pueden modificar su información de usuario, por ejemplo, para incluir una imagen de usuario.</p>
          <ul>
            <li>Entrar en Drupal como usuario <strong>minieditor_1</strong> y hacer clic en Mi cuenta. Se mostrará la ficha del usuario:
              <p class="captura"><img alt="Drupal. usuarios" src="../img/drupal/drupal_usuarios_4.png" width="1008" height="335" /></p>
            </li>
            <li>Al hacer clic en Editar se pueden modificar los datos, por ejemplo, incluir una imagen de usuario: <img alt="Cabeza nº 2" src="../img/iconos/cabezas/cabeza_02_128.png" width="116" height="128" />
              <p class="captura"><img alt="Drupal. Usuarios" src="../img/drupal/drupal_usuarios_5.png" width="710" height="160" /></p>
            </li>
            <li>Una vez subida la imagen, esta se muestra en la ficha del usuario ...
              <p class="captura"><img alt="Drupal. Usuarios" src="../img/drupal/drupal_usuarios_6.png" width="700" height="320" /></p>
            </li>
          </ul>
        </li>
      </ol>
    </section>

    <section id="ejercicio-4">
      <h2>Drupal (2) 4 - Ajustar el editor CKEditor al rol</h2>

      <p>En Drupal 7, los perfiles de CKEditor van asociados a formatos de entrada, por lo que si se desea que un usuario vea un menú de CKEditor distinto del del administrador, se deberá:</p>
      <ol>
        <li>Crear un nuevo Formato de texto (que se llamará, por ejemplo, HTML_para_minieditor)</li>
        <li>Crear un nuevo perfil de CKEditor asociado al formato de texto creado (que se llamará, por ejemplo, CKEditor_para_minieditor)</li>
        <li>Desactivar los formatos de texto Full HTML y Filtered HTML para el rol minieditor (y para el usuario autenticado)</li>
      </ol>
      <ol>
        <li>Creación del formato de texto
          <ul>
            <li>Como usuario administrador, elija el menú <strong>Configuración &gt; Formatos de texto</strong>
              <p class="captura"><img alt="Drupal. Nuevo Formato de entrada" src="../img/drupal/drupal_ckeditor_minieditor_01.png" width="1008" height="635" title="Drupal. Nuevo Formato de entrada" /></p>
            </li>
            <li>Haga clic en "Añadir formato de texto"
              <p class="captura"><img alt="Drupal. Nuevo Formato de entrada" src="../img/drupal/drupal_ckeditor_minieditor_02.png" width="1008" height="510" title="Drupal. Nuevo Formato de entrada" /></p>
            </li>
            <li>Rellene el formulario de creación del Formato de texto:
              <ul>
                <li>Nombre: <span class="resaltado">HTML_para_minieditor</span></li>
                <li>Roles: Marcar la casilla de <span class="resaltado">minieditor</span></li>
              </ul>
              <p class="captura"><img alt="Drupal. Nuevo Formato de entrada" src="../img/drupal/drupal_ckeditor_minieditor_03.png" width="1008" height="420" title="Drupal. Nuevo Formato de entrada" /></p>
            </li>
            <li>Al hacer clic en "Guardar la configuración", si no ha habido ningún problema se mostrará un mensaje confirmando la creación del Formato:
              <p class="captura"><img alt="Drupal. Nuevo Formato de entrada" src="../img/drupal/drupal_ckeditor_minieditor_04.png" width="1008" height="70" title="Drupal. Nuevo Formato de entrada" /></p>
            </li>
            <li>En la página <strong>Configuración &gt; Formatos de texto</strong> se mostrará el nuevo Formato de texto:
              <p class="captura"><img alt="Drupal. Nuevo Formato de entrada" src="../img/drupal/drupal_ckeditor_minieditor_05.png" width="1008" height="545" title="Drupal. Nuevo Formato de entrada" /></p>
            </li>
          </ul>
        </li>
        <li>Creación del perfil de CKEditor
          <ul>
            <li>Como administrador, elija el menú <strong>Configuración &gt; CKEditor</strong>
              <p class="captura"><img alt="Drupal. Nuevo perfil de CKEditor" src="../img/drupal/drupal_ckeditor_minieditor_11.png" width="1008" height="635" title="Drupal. Nuevo perfil de CKEditor" /></p>
            </li>
            <li>Haga clic en "Create a new profile":
              <p class="captura"><img alt="Drupal. Nuevo perfil de CKEditor" src="../img/drupal/drupal_ckeditor_minieditor_12.png" width="1008" height="600" title="Drupal. Nuevo perfil de CKEditor" /></p>
            </li>
            <li>Rellene el formulario de creación del Perfil:
              <ul>
                <li>Basic Setup:
                  <ul>
                    <li>Nombre: <span class="resaltado">CKEditor_para_minieditor</span></li>
                    <li>Formatos de texto: Marcar la casilla de <span class="resaltado">HTML_para_minieditor</span> </li>
                  </ul>
                </li>
                <li>Editor appearance:
                  <ul>
                    <li>Barra de herramientas: <span class="resaltado">Básico</span></li>
                  </ul>
                  <p class="captura"><img alt="Drupal. Nuevo perfil de CKEditor" src="../img/drupal/drupal_ckeditor_minieditor_13.png" width="1008" height="550" title="Drupal. Nuevo perfil de CKEditor" /></p>
                  <p class="captura"><img alt="Drupal. Nuevo perfil de CKEditor" src="../img/drupal/drupal_ckeditor_minieditor_14.png" width="1008" height="170" title="Drupal. Nuevo perfil de CKEditor" /></p>
                </li>
              </ul>
            </li>
            <li>Al hacer clic en "Guardar", si no ha habido ningún problema se mostrará un mensaje confirmando la creación del Perfil:
              <p class="captura"><img alt="Drupal. Nuevo perfil de CKEditor" src="../img/drupal/drupal_ckeditor_minieditor_15.png" width="1008" height="70" title="Drupal. Nuevo perfil de CKEditor" /></p>
            </li>
            <li>En la página <strong>Configuración &gt; CKEditor</strong> se mostrará el nuevo Perfil:
              <p class="captura"><img alt="Drupal. Nuevo perfil de CKEditor" src="../img/drupal/drupal_ckeditor_minieditor_16.png" width="1008" height="600" title="Drupal. Nuevo perfil de CKEditor" /></p>
            </li>
          </ul>
        </li>
        <li>Desactivación de los Formatos Full HTML y Filtered HTML para rol minieditor
          <ul>
            <li>En <strong>Configuración &gt; Formatos de texto</strong> se puede ver que los Formatos Full HTML y Filtered HTML están activados para el rol minieditor:
              <p class="captura"><img alt="Drupal. Desactivar Formatos de texto" src="../img/drupal/drupal_ckeditor_minieditor_31.png" width="1008" height="550" title="Drupal. Desactivar Formatos de texto" /></p>
            </li>
            <li>Haciendo clic en el enlace "configurar" correspondiente, se puede editar el Formato de texto Full HTML y desmarcar la casilla minieditor:
              <p class="captura"><img alt="Drupal. Desactivar Formatos de texto" src="../img/drupal/drupal_ckeditor_minieditor_32.png" width="1008" height="540" title="Drupal. Desactivar Formatos de texto" /></p>
            </li>
            <li>Haciendo clic en el enlace "configurar" correspondiente, se puede editar el Formato de texto Filtered HTML y desmarcar las casillas minieditor y usuario autenticado:
              <p class="captura"><img alt="Drupal. Desactivar Formatos de texto" src="../img/drupal/drupal_ckeditor_minieditor_33.png" width="1008" height="540" title="Drupal. Desactivar Formatos de texto" /></p>
            </li>
            <li>Una vez guardada la configuración, se puede comprobar que el rol minieditor ya no tiene acceso a los Formatos de texto Full HTML y Filtered HTML:
              <p class="captura"><img alt="Drupal. Desactivar Formatos de texto" src="../img/drupal/drupal_ckeditor_minieditor_34.png" width="1008" height="550" title="Drupal. Desactivar Formatos de texto" /></p>
            </li>
            <li>La desactivación de los Formatos de texto se podría haber realizado en <strong>Usuarios &gt; Permisos</strong>:
              <p class="captura"><img alt="Drupal. Desactivar Formatos de texto" src="../img/drupal/drupal_ckeditor_minieditor_35.png" width="1008" height="630" title="Drupal. Desactivar Formatos de texto" /></p>
            </li>
          </ul>
        </li>
        <li>Comprobación
          <ul>
            <li>Como usuario minieditor_1, al crear nuevo contenido, compruebe que se puede elegir el formato de texto HTML_para_minieditor y que la barra de herramientas de CKEditor es la barra básica:
              <p class="captura"><img alt="Drupal. Comprobación" src="../img/drupal/drupal_ckeditor_minieditor_21.png" width="991" height="625" title="Drupal. Comprobación" /></p>
            </li>
            <li>Además, no se deben poder elegir los formatos de texto Full HTML ni Filtered HTML:
              <p class="captura"><img alt="Drupal. Comprobación" src="../img/drupal/drupal_ckeditor_minieditor_22.png" width="991" height="110" title="Drupal. Comprobación" /></p>
            </li>
          </ul>
        </li>
      </ol>
    </section>

    <section id="ejercicio-5">
      <h2>Drupal (2) 5 - Subir imágenes y archivos: módulo IMCE</h2>

      <p>En este ejercicio se instalará un módulo para subir archivos, concretamente, el módulo IMCE.</p>

      <p>Referencias:</p>
      <ul>
        <li>Módulo IMCE: <a href="https://www.drupal.org/project/imce">https://www.drupal.org/project/imce</a></li>
      </ul>

      <hr class="corta" />

      <ul>
        <li>Descargar el módulo IMCE para Drupal 7 y descomprimir el archivo comprimido en la carpeta <strong>/drupal/sites/all/modules/imce</strong>.</li>
        <li>Entrar en Drupal como usuario <strong>admin</strong> y abrir el menú <strong>Módulos</strong>, que automáticamente mostrará el nuevo módulo en el apartado Multimedia:</li>
        <li>Activar el módulo y hacer clic en Guardar configuración.
          <p class="captura"><img alt="Drupal. IMCE" src="../img/drupal/drupal_imce_1.png" width="991" height="290" /></p>
        </li>
        <li>Configurar CKEditor para que utilice IMCE al enlazar a ficheros o imágenes en el perfil "Full HTML":
          <ul>
            <li>Abrir el menú <strong>Configuración &gt; Autoría del contenido &gt; CKEditor</strong> y hacer clic en editar el perfil Full:
              <p class="captura"><img alt="Drupal. IMCE" src="../img/drupal/drupal_imce_2.png" width="1008" height="595" /></p>
            </li>
            <li>Modificar las opciones File Browser Settings de manera que CKEditor utilice IMCE:
              <p class="captura"><img alt="Drupal. IMCE" src="../img/drupal/drupal_imce_3.png" width="1000" height="380" /></p>
            </li>
          </ul>
        </li>
        <li>Configurar IMCE para que usuarios con un determinado rol puedan utilizar IMCE:
          <ul>
            <li>Abrir el menú <strong>Configuración &gt; Medios &gt; IMCE</strong> y asignar el perfil <strong>User-1</strong> al rol <strong>administrador</strong>:
              <p class="captura"><img alt="Drupal IMCE" src="../img/drupal/drupal_imce_4.png" width="991" height="620" /></p>
            </li>
          </ul>
        </li>
        <li>Comprobar creando un artículo (con el formato de texto <strong>Full HTML</strong>) que al insertar una imagen el cuadro de diálogo incluye el botón "Ver Servidor":
          <p class="captura"><img alt="Drupal. IMCE" src="../img/drupal/drupal_imce_5.png" width="991" height="125" /></p>

          <table class="centrado">
            <tbody>
              <tr>
                <td><p class="captura"><img alt="Drupal. IMCE" src="../img/drupal/drupal_imce_5a.png" width="465" height="490" /></p>
                </td>
                <td><p class="captura"><img alt="Drupal. IMCE" src="../img/drupal/drupal_imce_5b.png" width="465" height="490" /></p>
                </td>
              </tr>
            </tbody>
          </table>
        </li>
      </ul>
    </section>

    <section id="ejercicio-6">
      <h2>Drupal (2) 6 - Configurar IMCE para el rol de minieditor</h2>

      <p>En este ejercicio se configurará IMCE para que dos usuarios <strong>mineditor_1</strong> y <strong>mineditor_2</strong> (de rol minieditor) también pueda subir archivos e imágenes con IMCE, creando en IMCE un perfil <strong>minieditor</strong>. Hacerlo primero de manera que cada uno pueda subir archivos en su propia carpeta. Modificarlo después de manera que compartan la misma carpeta.</p>

      <p class="incompleto"><img src="../varios/iconos/icono_en_construccion.svg" alt="En construcción" title="En construcción" width="55" height="48" />Por escribir</p>
    </section>

    <section id="ejercicio-7">
      <h2>Drupal (2) 7 - Ampliar las capacidades de IMCE con el módulo IMCE Mkdir</h2>

      <p>En este ejercicio se ampliarán las capacidades de IMCE con el módulo IMCE Mkdir, de manera que los usuarios puedan crease subcarpetas en la carpeta donde suben sus archivos.</p>

      <p>Referencias:</p>
      <ul>
        <li>Módulo IMCE Mkdir <a href="https://www.drupal.org/project/imce_mkdir">https://www.drupal.org/project/imce_mkdir</a></li>
      </ul>

      <p class="incompleto"><img src="../varios/iconos/icono_en_construccion.svg" alt="En construcción" title="En construcción" width="55" height="48" />Por escribir</p>
    </section>

    <footer>
      <p class="ultmod">Última modificación de esta página: 4 de febrero de 2016</p>

      <p class="licencia"><a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/deed.es_ES"><img alt="Licencia de Creative Commons" style="border-width:0" src="https://licensebuttons.net/l/by-sa/4.0/88x31.png" /></a><br />
        Esta página forma parte del curso <strong><a href="http://www.mclibre.org/consultar/webapps/">Aplicaciones web</a></strong> por <a href="http://www.mclibre.org/" rel="author">Bartolomé Sintes Marco</a><br />
        que se distribuye bajo una <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/deed.es_ES">Licencia Creative Commons BY-SA 4.0</a>.</p>
    </footer>
  </body>
</html>
