<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>Virtualización. Aplicaciones web. Bartolomé Sintes Marco. www.mclibre.org</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../varios/webapps.css" title="mclibre">
  <link rel="icon" href="../varios/favicon.ico">
</head>

<body>
  <h1>Virtualización</h1>

  <nav>
    <p>
      <a href="../index.html"><img src="../varios/iconos/icono-webapps.svg" alt="Índice de WebApps" title="Índice de WebApps" width="48" height="31"></a>
      <a href="#"><img src="../varios/iconos/icono-arrow-circle-up.svg" alt="Principio de la página" title="Principio de la página" width="36" height="36"></a>
    </p>

    <div class="toc">
      <h2>
        Virtualización
      </h2>

      <ul>
        <li><a href="#conceptos-basicos">Conceptos básicos</a></li>
      </ul>
    </div>
  </nav>

  <section id="conceptos-basicos">
    <h2>Conceptos básicos</h2>

    <p>En general, el objetivo de la virtualización es poder utilizar simultáneamente en un mismo ordenador dos o más sistemas operativos.</p>

    <p>De acuerdo con esta definición, instalar dos sistemas operativos en un ordenador (Windows y Linux, por ejemplo) y poder elegir uno u otro mediante un arranque dual no se considera virtualización, puesto que mediante un <strong>arranque dual</strong> no podemos ejecutar a la vez ambos sistemas.</p>

    <p>Y tampoco sería virtualización la <strong>simulación</strong>, que consiste en imitar el aspecto visual del sistema imitado. Por ejemplo, podríamos instalar un tema de escritorio en GNOME o KDE que imitara el escritorio de Windows. El problema de esta simulación sería que realmente no estaríamos utilizando Windows sino simplemente algo que parece Windows. Así que, por ejemplo, no podríamos instalar una aplicación de Windows puesto que el sistema operativo sería Linux, que no acepta instaladores de Windows.</p>

    <p>Para poder hablar de virtualización tienen que estar funcionando a la vez varios sistemas operativos. Uno de ellos es el sistema operativo principal y recibe el nombre de <strong>host</strong> (anfitrión). Es el sistema operativo que se instaló primero en el ordenador y el que se pone en marcha al arrancar el ordenador. Los demás sistemas operativos (uno o más) reciben el nombre de <strong>guests</strong> (huéspedes) y pueden ejecutarse o no a voluntad del usuario. Los sistemas operativos actuales (Windows, Linux, etc.) pueden ser tanto hosts como guests y se pueden dar todas la combinaciones posibles. En particular, un mismo sistema operativo puede ser a la vez host y guest, o un mismo sistema operativo puede estar instalado varias veces como guest.</p>

    <p>La virtualización tiene muchas aplicaciones interesantes:</p>
    <ul>
      <li>La más habitual es poder ejecutar aplicaciones que no están disponibles para el sistema operativo host, pero sí para otro sistema operativo que se instalaría como guest.</li>
      <li>La virtualización permite la conservación del software. Debido al progreso del hardware, los procesadores antiguos dejan de fabricarse y los sistemas operativos y aplicaciones antiguos dejan de desarrollarse y dejan de funcionar en el hardware moderno. Pero si el sistema operativo puede instalarse como guest, puede seguir utilizándose para siempre.</li>
      <li>La virtualización permite depurar y comprobar el funcionamiento de los programas y los sistemas operativos. Si un programa provoca un fallo de funcionamiento total, si se está ejecutando como guest, el sistema host puede recoger información sobre el motivo del fallo.</li>
      <li>La virtualización permite un mejor aprovechamiento del hardware, ya que un mismo ordenador puede contener muchos sistemas guests utilizados por usuarios diferentes, aislados unos de otros.</li>
    </ul>

    <p>Las primeras formas de virtualización se conseguían únicamente por software, pero con el tiempo los procesadores han ido incorporando instrucciones específicas para facilitar la virtualización (y sobre todo, acelerarla). En el caso de los procesadores x86, el microprocesador 386 (1985) fue el primero en incorporar el modo de ejecución 8086 virtual para permitir la ejecución de aplicaciones DOS creadas para el microprocesador 8086 y que no podían funcionar en un 386. Se trata de una virtualización específica, no de una solución general. Posteriormente, en 2005, Intel incorporó al Pentium 4 la tecnología <strong>VT-x</strong>, que permite virtualización en general al incorporar instrucciones que permiten que diferentes sistemas operativas crean tener acceso absoluto al procesador sin interferir unos con otros. AMD incorporó en 2006 al Athlon 64 una tecnología similar llamada <strong>AMD-V</strong>.</p>

    <p>En principio, podríamos rizar el rizo haciendo virtualización anidada, es decir instalando en un sistema guest un sistema operativo capaz de comportarse como host e instalar en él sistemas guests. La virtualización anidada es muy útil en la nube, ya que los sistemas operativos a los que accedemos en la nube suelen estar virtualizados, pero la virtualización anidada acabará siendo imprescindible en el futuro, a medida que dejen de fabricarse los procesadores actuales y los sistemas que ahora virtualizan sistemas antiguos tengan a su vez que virtualizarse para poderse ejecutar. Intel incluyó en la arquitectura Haskell (2013) instrucciones específicas para facilitar la virtualización anidada. AMD también lo hizo (nota: por lo menos en 2011, pero no he encontrado la referencia exacta), aunque actualmente (enero de 2020) Hyper-V, el hipervisor nativo de Windows, no admite la virtualización anidada en procesadores AMD.</p>

    <hr class="corta">

    <p>La forma más sofisticada de virtualización sería la <strong>emulación</strong>. Un emulador es un programa que implementa en software un determinado hardware (procesor, tarjeta gráfica, dispositivos de entrada y salida, etc.) y que responde a las órdenes exactamente igual que el hardware original. Sobre ese hardware emulado se puede instalar el sistema operativo guest. Si la emulación es completa, el sistema operativo guest creería estar utilizando un hardware real.</p>

    <p>El problema de los emuladores es su velocidad, ya que emular una instrucción del hardware original pueden necesitar muchas instrucciones en el hardware real. Pero ese problema no es importante si el sistema emulado es antiguo, porque esos sistemas eran mucho más lentos que los sistemas actuales por lo que la emulación ejecuta las aplicaciones a una velocidad suficiente. Por eso, la emulación es una solución aceptable para la ejecución de programas de los años 80, especialmente de juegos y programas como <a href="https://www.mamedev.org/index.php">M.A.M.E</a> permiten jugar a juegos clásicos de consolas ya desparecidas (aunque los juegos propiamente dichos deben conseguirse por otras vías, a veces de dudosa legalidad).</p>

    <p>Uno de los emuladores más importantes es <a href="https://www.qemu.org/">QEMU</a> <span class="incompleto">[por completar]</span>.</p>

    <p class="mcl-svg-diagrama-temporal">
      <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="1070" viewBox="-80 -60 1070 115">
        <title>Versiones de QEMU</title>
        <line x1="-20" y1="0" x2="1125" y2="0" stroke-width="3" stroke="hsl(355, 87%, 53%)" />
        <text x="-30" y="5" text-anchor="end" style="font-size: 100%">QEMU</text>
        <text x="-50" y="-50" text-anchor="middle" style="font-size: 60%">Actualizado</text>
        <text x="-50" y="-38" text-anchor="middle" style="font-size: 60%">03-01-2020</text>

        <line x1="0" y1="-50" x2="0" y2="40" stroke-width="1" stroke-dasharray="5,5" stroke="black" />
        <text x="30" y="-40" text-anchor="middle" style="font-size: 80%">2005</text>
        <line x1="60" y1="-50" x2="60" y2="40" stroke-width="1" stroke-dasharray="5,5" stroke="black" />
        <text x="90" y="-40" text-anchor="middle" style="font-size: 80%">2006</text>
        <line x1="120" y1="-50" x2="120" y2="40" stroke-width="1" stroke-dasharray="5,5" stroke="black" />
        <text x="150" y="-40" text-anchor="middle" style="font-size: 80%">2007</text>
        <line x1="180" y1="-50" x2="180" y2="40" stroke-width="1" stroke-dasharray="5,5" stroke="black" />
        <text x="210" y="-40" text-anchor="middle" style="font-size: 80%">2008</text>
        <line x1="240" y1="-50" x2="240" y2="40" stroke-width="1" stroke-dasharray="5,5" stroke="black" />
        <text x="270" y="-40" text-anchor="middle" style="font-size: 80%">2009</text>
        <line x1="300" y1="-50" x2="300" y2="40" stroke-width="1" stroke-dasharray="5,5" stroke="black" />
        <text x="330" y="-40" text-anchor="middle" style="font-size: 80%">2010</text>
        <line x1="360" y1="-50" x2="360" y2="40" stroke-width="1" stroke-dasharray="5,5" stroke="black" />
        <text x="390" y="-40" text-anchor="middle" style="font-size: 80%">2011</text>
        <line x1="420" y1="-50" x2="420" y2="40" stroke-width="1" stroke-dasharray="5,5" stroke="black" />
        <text x="450" y="-40" text-anchor="middle" style="font-size: 80%">2012</text>
        <line x1="480" y1="-50" x2="480" y2="40" stroke-width="1" stroke-dasharray="5,5" stroke="black" />
        <text x="510" y="-40" text-anchor="middle" style="font-size: 80%">2013</text>
        <line x1="540" y1="-50" x2="540" y2="40" stroke-width="1" stroke-dasharray="5,5" stroke="black" />
        <text x="570" y="-40" text-anchor="middle" style="font-size: 80%">2014</text>
        <line x1="600" y1="-50" x2="600" y2="40" stroke-width="1" stroke-dasharray="5,5" stroke="black" />
        <text x="630" y="-40" text-anchor="middle" style="font-size: 80%">2015</text>
        <line x1="660" y1="-50" x2="660" y2="40" stroke-width="1" stroke-dasharray="5,5" stroke="black" />
        <text x="690" y="-40" text-anchor="middle" style="font-size: 80%">2016</text>
        <line x1="720" y1="-50" x2="720" y2="40" stroke-width="1" stroke-dasharray="5,5" stroke="black" />
        <text x="750" y="-40" text-anchor="middle" style="font-size: 80%">2017</text>
        <line x1="780" y1="-50" x2="780" y2="40" stroke-width="1" stroke-dasharray="5,5" stroke="black" />
        <text x="810" y="-40" text-anchor="middle" style="font-size: 80%">2018</text>
        <line x1="840" y1="-50" x2="840" y2="40" stroke-width="1" stroke-dasharray="5,5" stroke="black" />
        <text x="870" y="-40" text-anchor="middle" style="font-size: 80%">2019</text>
        <line x1="900" y1="-50" x2="900" y2="40" stroke-width="1" stroke-dasharray="5,5" stroke="black" />
        <text x="930" y="-40" text-anchor="middle" style="font-size: 80%">2020</text>
        <line x1="960" y1="-50" x2="960" y2="40" stroke-width="1" stroke-dasharray="5,5" stroke="black" />

        <circle cx="181" cy="0" r="5" fill="hsl(355, 87%, 53%)" />
        <text x="181" y="-15" text-anchor="middle" fill="hsl(355, 87%, 53%)" style="font-size: 80%; font-weight: bold">0.9.1</text>
        <circle cx="250" cy="0" r="5" fill="hsl(355, 87%, 53%)" />
        <text x="250" y="25" text-anchor="middle" fill="hsl(355, 87%, 53%)" style="font-size: 80%; font-weight: bold">0.10</text>
        <circle cx="284" cy="0" r="5" fill="hsl(355, 87%, 53%)" />
        <text x="284" y="-15" text-anchor="middle" fill="hsl(355, 87%, 53%)" style="font-size: 80%; font-weight: bold">0.11</text>
        <circle cx="298" cy="0" r="5" fill="hsl(355, 87%, 53%)" />
        <text x="298" y="25" text-anchor="middle" fill="hsl(355, 87%, 53%)" style="font-size: 80%; font-weight: bold">0.12</text>
        <circle cx="355" cy="0" r="5" fill="hsl(355, 87%, 53%)" />
        <text x="355" y="-15" text-anchor="middle" fill="hsl(355, 87%, 53%)" style="font-size: 80%; font-weight: bold">0.13</text>
        <circle cx="368" cy="0" r="5" fill="hsl(355, 87%, 53%)" />
        <text x="368" y="25" text-anchor="middle" fill="hsl(355, 87%, 53%)" style="font-size: 80%; font-weight: bold">0.14</text>
        <circle cx="396" cy="0" r="5" fill="hsl(355, 87%, 53%)" />
        <text x="396" y="-15" text-anchor="middle" fill="hsl(355, 87%, 53%)" style="font-size: 80%; font-weight: bold">0.15</text>
        <circle cx="415" cy="0" r="5" fill="hsl(355, 87%, 53%)" />
        <text x="415" y="25" text-anchor="middle" fill="hsl(355, 87%, 53%)" style="font-size: 80%; font-weight: bold">1.0</text>
        <circle cx="445" cy="0" r="5" fill="hsl(355, 87%, 53%)" />
        <text x="445" y="-15" text-anchor="middle" fill="hsl(355, 87%, 53%)" style="font-size: 80%; font-weight: bold">1.1</text>
        <circle cx="461" cy="0" r="5" fill="hsl(355, 87%, 53%)" />
        <text x="461" y="25" text-anchor="middle" fill="hsl(355, 87%, 53%)" style="font-size: 80%; font-weight: bold">1.2</text>
        <circle cx="476" cy="0" r="5" fill="hsl(355, 87%, 53%)" />
        <text x="476" y="-15" text-anchor="middle" fill="hsl(355, 87%, 53%)" style="font-size: 80%; font-weight: bold">1.3</text>
        <circle cx="488" cy="0" r="5" fill="hsl(355, 87%, 53%)" />
        <text x="488" y="25" text-anchor="middle" fill="hsl(355, 87%, 53%)" style="font-size: 80%; font-weight: bold">1.4</text>
        <circle cx="503" cy="0" r="5" fill="hsl(355, 87%, 53%)" />
        <text x="503" y="-15" text-anchor="middle" fill="hsl(355, 87%, 53%)" style="font-size: 80%; font-weight: bold">1.5</text>
        <circle cx="517" cy="0" r="5" fill="hsl(355, 87%, 53%)" />
        <text x="517" y="25" text-anchor="middle" fill="hsl(355, 87%, 53%)" style="font-size: 80%; font-weight: bold">1.6</text>
        <circle cx="535" cy="0" r="5" fill="hsl(355, 87%, 53%)" />
        <text x="535" y="-15" text-anchor="middle" fill="hsl(355, 87%, 53%)" style="font-size: 80%; font-weight: bold">1.7</text>
        <circle cx="558" cy="0" r="5" fill="hsl(355, 87%, 53%)" />
        <text x="558" y="25" text-anchor="middle" fill="hsl(355, 87%, 53%)" style="font-size: 80%; font-weight: bold">2.0</text>
        <circle cx="575" cy="0" r="5" fill="hsl(355, 87%, 53%)" />
        <text x="575" y="-15" text-anchor="middle" fill="hsl(355, 87%, 53%)" style="font-size: 80%; font-weight: bold">2.1</text>
        <circle cx="597" cy="0" r="5" fill="hsl(355, 87%, 53%)" />
        <text x="597" y="25" text-anchor="middle" fill="hsl(355, 87%, 53%)" style="font-size: 80%; font-weight: bold">2.2</text>
        <circle cx="619" cy="0" r="5" fill="hsl(355, 87%, 53%)" />
        <text x="619" y="-15" text-anchor="middle" fill="hsl(355, 87%, 53%)" style="font-size: 80%; font-weight: bold">2.3</text>
        <circle cx="644" cy="0" r="5" fill="hsl(355, 87%, 53%)" />
        <text x="644" y="25" text-anchor="middle" fill="hsl(355, 87%, 53%)" style="font-size: 80%; font-weight: bold">2.4</text>
        <circle cx="658" cy="0" r="5" fill="hsl(355, 87%, 53%)" />
        <text x="658" y="-15" text-anchor="middle" fill="hsl(355, 87%, 53%)" style="font-size: 80%; font-weight: bold">2.5</text>
        <circle cx="682" cy="0" r="5" fill="hsl(355, 87%, 53%)" />
        <text x="682" y="25" text-anchor="middle" fill="hsl(355, 87%, 53%)" style="font-size: 80%; font-weight: bold">2.6</text>
        <circle cx="701" cy="0" r="5" fill="hsl(355, 87%, 53%)" />
        <text x="701" y="-15" text-anchor="middle" fill="hsl(355, 87%, 53%)" style="font-size: 80%; font-weight: bold">2.7</text>
        <circle cx="719" cy="0" r="5" fill="hsl(355, 87%, 53%)" />
        <text x="719" y="25" text-anchor="middle" fill="hsl(355, 87%, 53%)" style="font-size: 80%; font-weight: bold">2.8</text>
        <circle cx="738" cy="0" r="5" fill="hsl(355, 87%, 53%)" />
        <text x="738" y="-15" text-anchor="middle" fill="hsl(355, 87%, 53%)" style="font-size: 80%; font-weight: bold">2.9</text>
        <circle cx="760" cy="0" r="5" fill="hsl(355, 87%, 53%)" />
        <text x="760" y="25" text-anchor="middle" fill="hsl(355, 87%, 53%)" style="font-size: 80%; font-weight: bold">2.10</text>
        <circle cx="777" cy="0" r="5" fill="hsl(355, 87%, 53%)" />
        <text x="777" y="-15" text-anchor="middle" fill="hsl(355, 87%, 53%)" style="font-size: 80%; font-weight: bold">2.11</text>
        <circle cx="799" cy="0" r="5" fill="hsl(355, 87%, 53%)" />
        <text x="799" y="25" text-anchor="middle" fill="hsl(355, 87%, 53%)" style="font-size: 80%; font-weight: bold">2.12</text>
        <circle cx="817" cy="0" r="5" fill="hsl(355, 87%, 53%)" />
        <text x="817" y="-15" text-anchor="middle" fill="hsl(355, 87%, 53%)" style="font-size: 80%; font-weight: bold">3.0</text>
        <circle cx="837" cy="0" r="5" fill="hsl(355, 87%, 53%)" />
        <text x="837" y="25" text-anchor="middle" fill="hsl(355, 87%, 53%)" style="font-size: 80%; font-weight: bold">3.1</text>
        <circle cx="859" cy="0" r="5" fill="hsl(355, 87%, 53%)" />
        <text x="859" y="-15" text-anchor="middle" fill="hsl(355, 87%, 53%)" style="font-size: 80%; font-weight: bold">4.0</text>
        <circle cx="878" cy="0" r="5" fill="hsl(355, 87%, 53%)" />
        <text x="878" y="25" text-anchor="middle" fill="hsl(355, 87%, 53%)" style="font-size: 80%; font-weight: bold">4.1</text>
        <circle cx="897" cy="0" r="5" fill="hsl(355, 87%, 53%)" />
        <text x="897" y="-15" text-anchor="middle" fill="hsl(355, 87%, 53%)" style="font-size: 80%; font-weight: bold">4.2</text>
      </svg>
    </p>

    <p>El autor de QEMU, Fabrice Bellard, creó <a href="https://bellard.org/jslinux/">JSLinux</a> en 2011, un emulador de PCs (de tipo Pentium con pantalla VGA) escrito en JavaScript que permitía arrancar sistemas operativos en el navegador. En 2018 publicó una versión en WASM bastante más rápida que la original.</p>

    <hr class="corta">

  </section>

  <footer>
    <p class="ultmod">Última modificación de esta página: 3 de enero de 2020</p>

    <p class="licencia">
      <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/deed.es_ES"><img src="../varios/iconos/icono-cc-by-sa.svg" alt="Licencia Creative Commons" title="Licencia Creative Commons BY-SA" width="120" height="42"></a><br>
      Esta página forma parte del curso <strong><a href="https://www.mclibre.org/consultar/webapps/">Aplicaciones web</a></strong> por <a href="https://www.mclibre.org/" rel="author">Bartolomé Sintes Marco</a><br>
      que se distribuye bajo una <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/deed.es_ES">Licencia Creative Commons Reconocimiento-CompartirIgual 4.0 Internacional (CC BY-SA 4.0)</a>.
    </p>
  </footer>
</body>
</html>
